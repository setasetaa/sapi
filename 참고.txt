http://demoapi.smartbill.co.kr/referenceguide.html

sequelize model:create --name dti/main --attributes "conversation_id:CHAR, supbuy_type:CHAR, direction:CHAR, dti_wdate:date, dti_type:string, tax_demand:string, issue_id:string, seq_id:string, invoice_num:string, sup_com_id:string, sup_com_regno:CHAR, sup_rep_name:string, sup_com_name:string, sup_com_type:string, sup_com_classify:string, sup_com_addr:string, sup_dept_name:string, sup_emp_name:string, sup_tel_num:string, sup_email:string, byr_com_id:string, byr_com_regno:CHAR, byr_rep_name:string, byr_com_name:string, byr_com_type:string, byr_com_classify:string, byr_com_addr:string, byr_dept_name:string, byr_emp_name:string, byr_tel_num:string, byr_email:string, broker_com_id:string, broker_com_regno:CHAR, broker_rep_name:string, broker_com_name:string, broker_com_type:string, broker_com_classify:string, broker_com_addr:string, broker_dept_name:string, broker_emp_name:string, broker_tel_num:string, broker_email:string, sup_amount:integer, tax_amount:integer, total_amount:integer, dti_msg:BLOB, amend_code:string, ori_issue_id:string, remark:string, remark2:string, remark3:string, EXCHANGED_DOC_ID:string, SUP_BIZPLACE_CODE:string, BYR_BIZPLACE_CODE:string, BROKER_BIZPLACE_CODE:string, byr_dept_name2:string, byr_emp_name2:string, byr_tel_num2:string, byr_email2:string, attachfile_yn:CHAR, dtt_yn:CHAR"

sequelize model:create --name dti/item --attributes "conversation_id:CHAR, supbuy_type:CHAR, direction:CHAR, dti_line_num:integer, item_code:string, item_name:string, item_size:string, item_md:date,unit_price:integer, item_qty:integer, sup_amount:integer, tax_amount:integer, foreign_amount:integer, currency_code:string, item_gubun:string, remark:string, created_by:string, last_updated_by:string"

sequelize model:create --name dti/status --attributes "conversation_id:CHAR, supbuy_type:CHAR, direction:CHAR, dti_status:char, return_code:char, return_description:string, sbdescription:string, dept_name:string, created_by:string, last_updated_by:string"

sequelize db:migrate

ALTER TABLE dti_status ADD CONSTRAINT FK_dti_status FOREIGN KEY(conversation_id, supbuy_type, direction)
REFERENCES dti_main (conversation_id, supbuy_type, direction);

select * from information_schema.table_constraints where table_name = 'dti_status';

SELECT CAST(dti_msg AS CHAR(10000) CHARACTER SET utf8) FROM dti_main;

인증토큰 : QURiYWV1RTZpTkhDcU1lQW5hUGUraUxQaUZGZ0hDclBFOVFCVjZOSFA2TT0K

0101 일반 세금계산서

0102 영세율 세금계산서

0103 위수탁 세금계산서

0104 수입 세금계산서

0105 영세율 위수탁 세금계산서

0201 수정 일반 세금계산서

0202 수정 영세율 세금계산서

0203 수정 위수탁 세금계산서

0204 수정 수입 세금계산서

0205 수정 영세율 위수탁 세금계산서

0301 일반 계산서

0303 위수탁 계산서

0304 수입 계산서

0401 수정 일반 계산서

0403 수정 위수탁 계산서

0404 수정 수입 계산서

* 원본 샘플
<?xml version="1.0" encoding="UTF-8"?>

-<TaxInvoice xsi:schemaLocation="urn:kr:or:kec:standard:Tax:ReusableAggregateBusinessInformationEntitySchemaModule:1:0 http://www.kec.or.kr/standard/Tax/TaxInvoiceSchemaModule_1.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="urn:kr:or:kec:standard:Tax:ReusableAggregateBusinessInformationEntitySchemaModule:1:0">


-<ExchangedDocument>

<IssueDateTime>20180905165158</IssueDateTime>

</ExchangedDocument>


-<ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">


-<ds:SignedInfo>

<ds:CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/>

<ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"/>


-<ds:Reference URI="">


-<ds:Transforms>

<ds:Transform Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/>


-<ds:Transform Algorithm="http://www.w3.org/TR/1999/REC-xpath-19991116">

<ds:XPath>not(self::*[name() = 'TaxInvoice'] | ancestor-or-self::*[name() = 'ExchangedDocument'] | ancestor-or-self::ds:Signature)</ds:XPath>

</ds:Transform>

</ds:Transforms>

<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/>

<ds:DigestValue>wplrYfkczIWluFirZIZQH6VVZdZKod4eNzvpNZxWQJc=</ds:DigestValue>

</ds:Reference>

</ds:SignedInfo>

<ds:SignatureValue>KnALtLRj5f1izpT9iDt5tzw43hItgz6SAC+oV6HjTgAXYzNRAKymo5tGMM46UhBsLGsnalbQ2Pi65gRUAHxuQdk/sMfdDmtDQa4FY/olvXpf04wTxIM/ntrigi34CRdLatYaR5rYItrVM5M2D/RFNeFOHdlLg8A7eAh5rMulHVgLRadjW1RCw0r69ToMiw/I1U+y3x55sP8JhQWCgBMt46ksM9dk3h1L7yZv1WWY4RmKHjo5LnERBVmklXyxfP/7iHGKOg9XDhZnIIkh5Nj8qUjCm4/zs/WeBog1JA/vnwAaEa1j8Gc8x6+10OJjdHz2GJCA1AF5nhW7pld6we7yvg==</ds:SignatureValue>


-<ds:KeyInfo>


-<ds:X509Data>

<ds:X509Certificate>MIIFzTCCBLWgAwIBAgIEBGGFITANBgkqhkiG9w0BAQsFADBKMQswCQYDVQQGEwJL UjENMAsGA1UECgwES0lDQTEVMBMGA1UECwwMQWNjcmVkaXRlZENBMRUwEwYDVQQD DAxzaWduR0FURSBDQTUwHhcNMTgwNjE5MDQ0ODMyWhcNMTkwNzE5MTQ1OTU5WjCB kjELMAkGA1UEBhMCS1IxDTALBgNVBAoMBEtJQ0ExEzARBgNVBAsMCmxpY2Vuc2Vk Q0ExFjAUBgNVBAsMDVRFU1TrsJzquInsmqkxFjAUBgNVBAsMDVRFU1Tsnbjspp3s hJwxETAPBgNVBAsMCFJB7IS87YSwMRwwGgYDVQQDDBPthYzsiqTtirgo67KV7J24 LUIpMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAl+46eAPWTMzTqIzb RmYfOTr2MHdkGzQEEKCHazeYhEGTTicPopzLn+Bsc7cGaX6K2s7KTI4cvvjOZACF 2Go80o6uE6dBY0py7TBaksZs3dx6p2QhuB5J7YwneaB5O/Vjig4APuApyUX59EFu hnA9Lhp//fbiH9TiSeryuxoNs9ZcQmFCLV0l5bT9/6Yfe5UbewUH1JcoW9zqikk1 9EBN3GDidKqOlqcSqDoYyl94NcnbLG3/bSbQ6CzG0BtTbpVLZYKIEu/QKD+bdjHu n3TWeDtT1CpDJUXzbwNXALKc3LpqIpt7UQmpbI6ySxLfcXcmm3s6VRkjuv6xP93m Ec2W5wIDAQABo4ICcDCCAmwwgY8GA1UdIwSBhzCBhIAU2L467EWZxZ7jnOqBH9Id ErA2PoihaKRmMGQxCzAJBgNVBAYTAktSMQ0wCwYDVQQKDARLSVNBMS4wLAYDVQQL DCVLb3JlYSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eSBDZW50cmFsMRYwFAYDVQQD DA1LSVNBIFJvb3RDQSA0ggIQHTAdBgNVHQ4EFgQUmHZwHum9dGKtrajuy6XKsf0v ogEwDgYDVR0PAQH/BAQDAgbAMHUGA1UdIARuMGwwagYKKoMajJpEBQIBATBcMCwG CCsGAQUFBwIBFiBodHRwOi8vd3d3LnNpZ25nYXRlLmNvbS9jcHMuaHRtbDAsBggr BgEFBQcCAjAgHh7HdAAgx3jJncEcspQAIKz1x3jHeMmdwRzHhbLIsuQwgYsGA1Ud EQSBgzCBgIEVcHVyZTI3MTNAc2lnbmdhdGUuY29toGcGCSqDGoyaRAoBAaBaMFgM E+2FjOyKpO2KuCjrspXsnbgtQikwQTA/BgoqgxqMmkQKAQEBMDEwCwYJYIZIAWUD BAIBoCIEIDBJBuylvdVS+FrC923QiszSLz8vo1+0SjWOI926PofiMF4GA1UdHwRX MFUwU6BRoE+GTWxkYXA6Ly9sZGFwLnNpZ25nYXRlLmNvbTozODkvb3U9ZHA3cDY1 MDAsb3U9Y3JsZHAsb3U9QWNjcmVkaXRlZENBLG89S0lDQSxjPUtSMEQGCCsGAQUF BwEBBDgwNjA0BggrBgEFBQcwAYYoaHR0cDovL29jc3Auc2lnbmdhdGUuY29tOjkw MjAvT0NTUFNlcnZlcjANBgkqhkiG9w0BAQsFAAOCAQEAgwTcUsT5JCwoFTyhPpXs KqNJuNLsZNrgR+sXMa4q/zk8Vlikvd+L0zOrvjOHwniN//bTPwYG+XgR2Ak5SVuE TUuB5nP6xeh64rbs8yDT+JAwNuJuSf5tyMt9l/b2HcYpRmCsfkZzSb6sbuqK+qMF 2SA0kEzgmA6Czr2PbU6j5U1BsYCERrxag8BVBusrkOcrVJ+LeCG06Byi7TxE8DdL fjdOeq/QRzTvMkieK8Ue5vhSALwryjowuAMgbNUpyB6FAoToZyQ9LhJT/1gQ4wO/ 0z6X6Kyh+omJ8vS54RcoCVlru/XYbzfLnqpU2rdfy5Bi+WzUkKY01DVgVwWqXFWy Vw== </ds:X509Certificate>

</ds:X509Data>

</ds:KeyInfo>

</ds:Signature>


-<TaxInvoiceDocument>

<IssueID>2018090541000008000024qr</IssueID>

<TypeCode>0103</TypeCode>

<DescriptionText/>

<IssueDateTime>20180905</IssueDateTime>

<PurposeCode>02</PurposeCode>

</TaxInvoiceDocument>


-<TaxInvoiceTradeSettlement>


-<InvoicerParty>

<ID>9876543234</ID>

<TypeCode>서비스</TypeCode>

<NameText>스마트페이스</NameText>

<ClassificationCode>서비스</ClassificationCode>


-<SpecifiedOrganization>

<TaxRegistrationID>0001</TaxRegistrationID>

</SpecifiedOrganization>


-<SpecifiedPerson>

<NameText>김영미</NameText>

</SpecifiedPerson>


-<DefinedContact>

<DepartmentNameText/>

<PersonNameText>김순희</PersonNameText>

<TelephoneCommunication>02-1111-2222</TelephoneCommunication>

<URICommunication>__DREGON007@nate.com</URICommunication>

</DefinedContact>


-<SpecifiedAddress>

<LineOneText>경기 부천시 원미구 중1동 원미아파트</LineOneText>

</SpecifiedAddress>

</InvoicerParty>


-<InvoiceeParty>

<ID>7418529630</ID>

<TypeCode>솔루션</TypeCode>

<NameText>스마일탁구장</NameText>

<ClassificationCode>sw</ClassificationCode>


-<SpecifiedOrganization>

<TaxRegistrationID>0002</TaxRegistrationID>

<BusinessTypeCode>01</BusinessTypeCode>

</SpecifiedOrganization>


-<SpecifiedPerson>

<NameText>박대표</NameText>

</SpecifiedPerson>


-<PrimaryDefinedContact>

<DepartmentNameText/>

<PersonNameText>seta</PersonNameText>

<TelephoneCommunication>062-3334-2344</TelephoneCommunication>

<URICommunication>__setaseta@nate.com</URICommunication>

</PrimaryDefinedContact>


-<SpecifiedAddress>

<LineOneText>성수동 성수1가 린하우스</LineOneText>

</SpecifiedAddress>

</InvoiceeParty>


-<BrokerParty>

<ID>2208173111</ID>

<TypeCode>서비스</TypeCode>

<NameText>(주)테스트</NameText>

<ClassificationCode>서비스</ClassificationCode>


-<SpecifiedOrganization>

<TaxRegistrationID>0003</TaxRegistrationID>

</SpecifiedOrganization>


-<SpecifiedPerson>

<NameText>테스트씨</NameText>

</SpecifiedPerson>


-<DefinedContact>

<DepartmentNameText/>

<PersonNameText>김현준</PersonNameText>

<TelephoneCommunication>063-223-2222</TelephoneCommunication>

<URICommunication>test@test.com</URICommunication>

</DefinedContact>


-<SpecifiedAddress>

<LineOneText>서울 강남구 역삼동 111111</LineOneText>

</SpecifiedAddress>

</BrokerParty>


-<SpecifiedPaymentMeans>

<TypeCode>10</TypeCode>

<PaidAmount>3300</PaidAmount>

</SpecifiedPaymentMeans>


-<SpecifiedPaymentMeans>

<TypeCode>20</TypeCode>

<PaidAmount>0</PaidAmount>

</SpecifiedPaymentMeans>


-<SpecifiedPaymentMeans>

<TypeCode>30</TypeCode>

<PaidAmount>0</PaidAmount>

</SpecifiedPaymentMeans>


-<SpecifiedPaymentMeans>

<TypeCode>40</TypeCode>

<PaidAmount>0</PaidAmount>

</SpecifiedPaymentMeans>


-<SpecifiedMonetarySummation>

<ChargeTotalAmount>3000</ChargeTotalAmount>

<TaxTotalAmount>300</TaxTotalAmount>

<GrandTotalAmount>3300</GrandTotalAmount>

</SpecifiedMonetarySummation>

</TaxInvoiceTradeSettlement>


-<TaxInvoiceTradeLineItem>

<SequenceNumeric>1</SequenceNumeric>

<DescriptionText>100</DescriptionText>

<InvoiceAmount>100</InvoiceAmount>

<ChargeableUnitQuantity>1</ChargeableUnitQuantity>

<InformationText>4*4</InformationText>

<NameText>t1</NameText>

<PurchaseExpiryDateTime>20180905</PurchaseExpiryDateTime>


-<TotalTax>

<CalculatedAmount>10</CalculatedAmount>

</TotalTax>


-<UnitPrice>

<UnitAmount>100</UnitAmount>

</UnitPrice>

</TaxInvoiceTradeLineItem>


-<TaxInvoiceTradeLineItem>

<SequenceNumeric>2</SequenceNumeric>

<DescriptionText>200</DescriptionText>

<InvoiceAmount>400</InvoiceAmount>

<ChargeableUnitQuantity>2</ChargeableUnitQuantity>

<InformationText>4*4</InformationText>

<NameText>t2</NameText>

<PurchaseExpiryDateTime>20180905</PurchaseExpiryDateTime>


-<TotalTax>

<CalculatedAmount>40</CalculatedAmount>

</TotalTax>


-<UnitPrice>

<UnitAmount>200</UnitAmount>

</UnitPrice>

</TaxInvoiceTradeLineItem>


-<TaxInvoiceTradeLineItem>

<SequenceNumeric>3</SequenceNumeric>

<DescriptionText>300</DescriptionText>

<InvoiceAmount>900</InvoiceAmount>

<ChargeableUnitQuantity>3</ChargeableUnitQuantity>

<InformationText>4*4</InformationText>

<NameText>t3</NameText>

<PurchaseExpiryDateTime>20180905</PurchaseExpiryDateTime>


-<TotalTax>

<CalculatedAmount>90</CalculatedAmount>

</TotalTax>


-<UnitPrice>

<UnitAmount>300</UnitAmount>

</UnitPrice>

</TaxInvoiceTradeLineItem>


-<TaxInvoiceTradeLineItem>

<SequenceNumeric>4</SequenceNumeric>

<DescriptionText>400</DescriptionText>

<InvoiceAmount>1600</InvoiceAmount>

<ChargeableUnitQuantity>4</ChargeableUnitQuantity>

<InformationText>4*4</InformationText>

<NameText>t4</NameText>

<PurchaseExpiryDateTime>20180905</PurchaseExpiryDateTime>


-<TotalTax>

<CalculatedAmount>160</CalculatedAmount>

</TotalTax>


-<UnitPrice>

<UnitAmount>400</UnitAmount>

</UnitPrice>

</TaxInvoiceTradeLineItem>

</TaxInvoice>
